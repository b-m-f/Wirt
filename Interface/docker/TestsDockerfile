
FROM node:latest as interface

# fails when installing from package.json

# build the app
WORKDIR '/app'
COPY Interface/package.json  .
COPY Interface/package-lock.json .
RUN npm install chromedriver
RUN npm ci --only=dev --ignore-scripts

COPY Interface/docker/wait-for.sh wait-for.sh
RUN chmod +x wait-for.sh

COPY Interface/tests tests
COPY Interface/nightwatch.conf.js .
COPY Interface/jest.config.js jest.config.js

CMD ["npm", "run", "test:ci"]